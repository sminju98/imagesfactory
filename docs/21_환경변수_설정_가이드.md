# 환경 변수 설정 가이드

## 개요
ImageFactory 프로젝트의 환경 변수 설정 방법입니다.

## .env.local 파일 생성

프로젝트 루트에 `.env.local` 파일을 생성하고 아래 내용을 복사하여 값을 채워주세요.

```bash
# ===========================================
# ImageFactory 환경 변수 설정
# ===========================================

# -------------------------------------------
# Firebase (클라이언트)
# Firebase 콘솔 > 프로젝트 설정 > 일반에서 확인
# -------------------------------------------
NEXT_PUBLIC_FIREBASE_API_KEY=
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=
NEXT_PUBLIC_FIREBASE_PROJECT_ID=
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=
NEXT_PUBLIC_FIREBASE_APP_ID=

# -------------------------------------------
# Firebase Admin (서버)
# 방법 1: 서비스 계정 JSON을 Base64로 인코딩
# -------------------------------------------
FIREBASE_SERVICE_ACCOUNT_BASE64=

# 방법 2: 개별 환경 변수
FIREBASE_ADMIN_PROJECT_ID=
FIREBASE_ADMIN_CLIENT_EMAIL=
FIREBASE_ADMIN_PRIVATE_KEY=

# -------------------------------------------
# AI API Keys
# -------------------------------------------
# OpenAI (DALL-E 3, GPT-Image-1, GPT 프롬프트 교정/추천)
OPENAI_API_KEY=sk-...

# Replicate (SDXL, Flux, PixArt, Recraft, Playground, Kandinsky)
REPLICATE_API_TOKEN=r8_...

# xAI (Aurora/Grok)
XAI_API_KEY=xai-...

# Leonardo.ai
LEONARDO_API_KEY=

# Ideogram
IDEOGRAM_API_KEY=

# GoAPI (Midjourney 비공식 API)
# https://www.goapi.ai/ 에서 발급
GOAPI_API_KEY=

# Google AI (Gemini Imagen)
# https://aistudio.google.com/app/apikey 에서 발급
GOOGLE_AI_API_KEY=

# -------------------------------------------
# Translation (프롬프트 번역)
# -------------------------------------------
GOOGLE_TRANSLATE_API_KEY=

# -------------------------------------------
# Email (SendGrid)
# -------------------------------------------
SENDGRID_API_KEY=SG....
SENDGRID_FROM_EMAIL=noreply@imagefactory.co.kr

# -------------------------------------------
# Payment (토스페이먼츠)
# -------------------------------------------
TOSS_CLIENT_KEY=test_ck_...
TOSS_SECRET_KEY=test_sk_...

# -------------------------------------------
# App 설정
# -------------------------------------------
NEXT_PUBLIC_APP_URL=https://imagefactory.co.kr
CDN_DOMAIN=https://cdn.imagefactory.co.kr

# -------------------------------------------
# 테스트 모드
# -------------------------------------------
TEST_MODE=false
```

## API 키 발급 방법

### 1. OpenAI API
1. https://platform.openai.com/api-keys 접속
2. "Create new secret key" 클릭
3. 발급된 키를 `OPENAI_API_KEY`에 설정

### 2. Replicate API
1. https://replicate.com/account/api-tokens 접속
2. "Create token" 클릭
3. 발급된 키를 `REPLICATE_API_TOKEN`에 설정

### 3. xAI (Grok/Aurora)
1. https://console.x.ai/ 접속
2. API 키 발급
3. `XAI_API_KEY`에 설정

### 4. Ideogram
1. https://ideogram.ai/manage-api 접속
2. API 키 발급
3. `IDEOGRAM_API_KEY`에 설정

### 5. GoAPI (Midjourney)
1. https://www.goapi.ai/ 접속
2. 회원가입 후 API 키 발급
3. `GOAPI_API_KEY`에 설정
4. 참고: Midjourney 비공식 API이므로 정책 변경될 수 있음

### 6. SendGrid
1. https://app.sendgrid.com/settings/api_keys 접속
2. "Create API Key" 클릭
3. 발급된 키를 `SENDGRID_API_KEY`에 설정

### 5. 토스페이먼츠
1. https://developers.tosspayments.com/ 접속
2. 테스트 키 확인
3. `TOSS_CLIENT_KEY`, `TOSS_SECRET_KEY` 설정

## Firebase Functions 환경 변수

Firebase Functions에서 환경 변수를 사용하려면:

```bash
# Firebase CLI로 설정
firebase functions:config:set openai.key="sk-xxx"
firebase functions:config:set replicate.token="r8_xxx"
firebase functions:config:set sendgrid.key="SG.xxx"

# 또는 .env 파일 사용 (Functions v2)
# functions/.env 파일 생성
```

## 테스트 모드

`TEST_MODE=true`로 설정하면 실제 AI API를 호출하지 않고 더미 이미지를 생성합니다.
개발 및 테스트 시 유용합니다.

```bash
TEST_MODE=true
```

